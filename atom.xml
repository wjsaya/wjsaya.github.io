<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>wjsaya的博客</title>
  <subtitle>一个菜鸡运维的日常</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://wjsaya.github.io/"/>
  <updated>2017-10-23T01:27:34.786Z</updated>
  <id>https://wjsaya.github.io/</id>
  
  <author>
    <name>wjsaya</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>[python每日一练]--0009:找出html里的链接</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0009..html"/>
    <id>https://wjsaya.github.io/python每日一练/0009..html</id>
    <published>2017-10-19T16:00:00.000Z</published>
    <updated>2017-10-23T01:27:34.786Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br>个人博客地址：<a href="https://wjsaya.github.io">https://wjsaya.github.io</a><br><strong>第 0009 题：</strong>一个HTML文件，找出里面的链接。</p>
</blockquote>
<h2 id=""><a href="#" class="headerlink" title=""></a><a id="more"></a></h2><h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>打开html文件；</li>
<li>逐行读取文件;</li>
<li>通过正则表达式匹配<a href="http://之类的开头的链接即可。" target="_blank" rel="external">http://之类的开头的链接即可。</a></li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#第009题，一个HTML文件，找出里面的链接。</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">analyze</span><span class="params">(file_name)</span>:</span></div><div class="line">    <span class="comment">#print (os.listdir())</span></div><div class="line">    <span class="keyword">print</span> (os.getcwd())</div><div class="line">    line = open(file_name,<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>).read()</div><div class="line">    R = (<span class="string">r'([hftps]+://[^\s]*)"'</span>)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span>  (re.findall(R, line)):</div><div class="line">        <span class="keyword">print</span> (i)</div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>: </div><div class="line">    html = <span class="string">"./test.html"</span></div><div class="line">    analyze(html)</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="http://img.blog.csdn.net/20171023092723948?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="0009"></h2>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;个人博客地址：&lt;a href=&quot;https://wjsaya.github.io&quot;&gt;https://wjsaya.github.io&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0009 题：&lt;/strong&gt;一个HTML文件，找出里面的链接。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[随笔一写]--在本科的第一个月</title>
    <link href="https://wjsaya.github.io/%E6%9D%82%E8%B0%88/first_month.html"/>
    <id>https://wjsaya.github.io/杂谈/first_month.html</id>
    <published>2017-10-03T16:00:00.000Z</published>
    <updated>2017-10-04T16:29:44.464Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>进入本科的第一个月，心累！总结篇<br><a id="more"></a></p>
</blockquote>
<p>&ensp; &ensp;&ensp;&ensp;一个月前，也就是9月4日。那是我专升本之后到本科学校报道的日子，在那天，已经毕业的大三的我，在一个陌生的学校，又一次成为了小学弟。过去了一个月，我的生活变化并不大，一样的吃一样的睡，区别可能就是宿舍可以洗热水澡？更大的区别可能就是有了压力吧。</p>
<p>&ensp; &ensp;&ensp;&ensp;不得不承认，走了捷径就要付出代价。升本时是免试的，因此我对于考试的科目：C语言，英语，高数没有做任何的了解与学习，到了这里，发现C语言只记得基础了，英语做一篇四级阅读只能对一半，高数课上完全是坐飞机（哈哈哈），不过还好，其他的专业课打都是自己以前曾经接触过的，压力不大。接下来的就是恶补高数和英语，高数起码要跟得上老师的步伐吧？至于英语呢，先定个目标，12月通过四级考试（嘛。。。貌似希望不大）。落下的，总得慢慢捡起来不是（苦笑）。</p>
<p>&ensp; &ensp;&ensp;&ensp;除了学习上的落差，更大的体会就是课堂了，在专科的我从来没有担心过作业这种东西（曾经的内心PS：作业？就是上课让自己练习的那些？太easy了，早已完成），到了新的环境，貌似找到了一丢丢以前上学的感觉，上课听不懂，下课还得复习，课后居然还有作业等着完成，唉，总之调整心态吧，这里的教学方式和专科的确差了太多了，花了一个月来慢慢适应，也算是逐渐接受了这种方式。</p>
<p>&ensp; &ensp;&ensp;&ensp;还有一点，就是关于周遭的人了，新的寝室的五个老哥也个个都是人才，说话也好听，我超喜欢这里的！不同的地方总会遇到不同的人，不同的人碰撞在一起自然会碰撞出不同的火花。初到寝室有点不安，室友会是怎样的人？现在的我十分坦然，个个都是人才，未来两年不寂寞哈哈。</p>
<p>最后列一下自己以后的小计划：</p>
<ul>
<li>高数英语弄起走：没办法，即使再艰难，课也得上啊；</li>
<li>每周七天，除开不可抗力，保证晚上跑步三次，每次4-5km左右：身体才是革命的本钱，健壮的体魄才能撑起这并不怎么健硕的大脑；</li>
<li>在这之外呢，嘛。。。人生苦短，我学python。。。</li>
</ul>
<hr>
<p><b><a href="https://wjsaya.github.io">wjsaya</a></b>  &ensp;  2017/10/4 22:55  &ensp;  于  &ensp;  <b>四川省成都市</b></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;进入本科的第一个月，心累！总结篇&lt;br&gt;
    
    </summary>
    
      <category term="其他" scheme="https://wjsaya.github.io/categories/%E5%85%B6%E4%BB%96/"/>
    
      <category term="随笔一写" scheme="https://wjsaya.github.io/categories/%E5%85%B6%E4%BB%96/%E9%9A%8F%E7%AC%94%E4%B8%80%E5%86%99/"/>
    
    
      <category term="随笔一写" scheme="https://wjsaya.github.io/tags/%E9%9A%8F%E7%AC%94%E4%B8%80%E5%86%99/"/>
    
  </entry>
  
  <entry>
    <title>[python爬虫]--爬取mzitu.com的图片并保存</title>
    <link href="https://wjsaya.github.io/%E7%88%AC%E8%99%AB/mzitu.html"/>
    <id>https://wjsaya.github.io/爬虫/mzitu.html</id>
    <published>2017-08-02T16:00:00.000Z</published>
    <updated>2017-08-03T01:38:43.386Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。<br>github地址：<a href="https://github.com/wjsaya/python_spider_learn/" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/</a><br>因为本人为菜鸡一只，所以写出来的代码应该是十分丑陋并且效率底下的，请各路大神不要鄙视，当然，如果能够不吝赐教那就更好啦(≧▽≦)/<br>个人博客：<a href="https://wjsaya.github.io">https://wjsaya.github.io</a><br>CSDN博客：:<a href="http://blog.csdn.net/saya_wj" target="_blank" rel="external">http://blog.csdn.net/saya_wj</a><br>本次内容:爬取mzitu.com的图片并保存到本地<br><a id="more"></a></p>
</blockquote>
<hr>
<h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>获取用户输入的图片合辑个数。</li>
<li>在个数限制内访问汇总页，获取相应数量的图片合辑。</li>
<li>获取到图片合辑之后，访问图片合辑，拿到图片合辑的每一个页面的url。</li>
<li>访问页面url，获取图片下载链接。</li>
<li>下载图片，同时做一些处理（创建合辑文件夹，判断是否已下载等等）。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usrbin/env python3</span></div><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> io</div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_pic</span><span class="params">(url)</span>:</span></div><div class="line">    <span class="comment"># 传入一个起始图片页面url，获取其他的所有图片页面url，如下：</span></div><div class="line">    <span class="comment">#&lt;a href="http://www.mzitu.com/98966/2"&gt;&lt;span&gt;2&lt;/span&gt;&lt;/a&gt;</span></div><div class="line">    <span class="comment">#    print ("获取页面url完成，开始获取图片url并下载...")</span></div><div class="line">    q = requests.get(url, headers=head).text</div><div class="line">    title_R = (<span class="string">r'&lt;h2.*title"&gt;(.*)&lt;/h2&gt;'</span>)</div><div class="line">    title = re.findall(title_R, q)[<span class="number">0</span>]</div><div class="line">    page_R = (<span class="string">r'&lt;span&gt;(..)&lt;/span&gt;'</span>)</div><div class="line">    max_page = re.findall(page_R, q)[<span class="number">0</span>]</div><div class="line">    <span class="comment"># title是网页标题，可能含有特殊字符，需过滤</span></div><div class="line">    title = re.sub(<span class="string">u'[\/:*?"&gt;|&lt; 满]+'</span>, <span class="string">"#"</span>, title)</div><div class="line">    <span class="comment">#title = re.sub(r'[.]+',"？",title)</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> (title, max_page)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_dir</span><span class="params">(where)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        os.chdir(where)</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        os.mkdir(where)</div><div class="line">        os.chdir(where)</div><div class="line">        print(<span class="string">"创建并切换到目录'"</span> + where + <span class="string">"'完成"</span>)</div><div class="line"><span class="comment">#    print ("切换目录到'"+where+"'完成")</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">down</span><span class="params">(one, url)</span>:</span></div><div class="line">    <span class="comment"># 传入一个包含图片的页面url，获取里面的图片地址并下载到本地，如下：</span></div><div class="line">    <span class="comment">#&lt;img src="http://i.meizitu.net/2017/07/30a01.jpg" alt="**************"&gt;</span></div><div class="line">    title = one[<span class="number">0</span>]</div><div class="line">    max_page = one[<span class="number">1</span>]</div><div class="line">    R = (<span class="string">r'&lt;img src="(.*)" alt=".*&gt;'</span>)</div><div class="line">    change_dir(<span class="string">'./mzitu'</span>)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        os.chdir(<span class="string">"./"</span> + title)</div><div class="line">        print(<span class="string">"'"</span> + title + <span class="string">"'已下载，跳过"</span>)</div><div class="line">        change_dir(<span class="string">"../../"</span>)</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        change_dir(<span class="string">"./"</span> + title)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, int(max_page)):</div><div class="line">            page = url + <span class="string">"/"</span> + str(i + <span class="number">1</span>)</div><div class="line">            html = requests.get(page, headers=head).text</div><div class="line">            img_url = re.findall(R, html)[<span class="number">0</span>]</div><div class="line">            pic = requests.get(img_url, headers=head)</div><div class="line">            <span class="keyword">with</span> open(str(i) + <span class="string">'.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</div><div class="line">                <span class="keyword">for</span> p <span class="keyword">in</span> pic:</div><div class="line">                    f.write(p)</div><div class="line">        change_dir(<span class="string">"../../"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_url_list</span><span class="params">(url)</span>:</span></div><div class="line">    <span class="comment"># 传入all页面的url，获取其他的所有文章链接，如下：</span></div><div class="line">    <span class="comment">#&lt;a href="http://www.mzitu.com/99009" target="_blank"&gt;********&lt;/a&gt;</span></div><div class="line">    text = requests.get(url, headers=head).text</div><div class="line">    R = (<span class="string">r'.*(http://www.mzitu.com/[0-9]+)".*'</span>)</div><div class="line"><span class="comment">#    print (text)</span></div><div class="line">    print(<span class="string">"从"</span> + url + <span class="string">"获取专辑列表完成，开始获取页面url..."</span>)</div><div class="line">    <span class="keyword">return</span> re.findall(R, text)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    <span class="comment"># sys.stdout = io.TextIOWrapper(sys.stdout.buffer,encoding='gb18030') #改变标准输出的默认编码</span></div><div class="line">    <span class="comment"># 曾经在运行时报字符编码错误所以添加了一条，但是现在去掉了，貌似也没报错。。。</span></div><div class="line">    head = &#123;</div><div class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:54.0) Gecko/20100101 Firefox/54.0'</span>,</div><div class="line">        <span class="string">'Referer'</span>: <span class="string">'http://www.mzitu.com/37288/3'</span>&#125;</div><div class="line">    url = <span class="string">'http://www.mzitu.com/all'</span></div><div class="line">    page_number = input(<span class="string">"下载多少页？"</span>)</div><div class="line">    <span class="comment">#page_number = "2"</span></div><div class="line">    print(<span class="string">"#"</span> + page_number + <span class="string">"#"</span>)</div><div class="line">    url_list = get_url_list(url)</div><div class="line">    count = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> url_list:</div><div class="line">        <span class="keyword">if</span> str(count) &lt; page_number:</div><div class="line">            one = get_pic(i)</div><div class="line">            down(one, i)</div><div class="line">            count += <span class="number">1</span></div><div class="line">            print(i + <span class="string">"：已经全部下载完成"</span>)</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p>由于内容为16+，所以不贴图了。。。需要的自行执行</p>
<h2 id="一些废话："><a href="#一些废话：" class="headerlink" title="一些废话："></a>一些废话：</h2><p>自学东西毕竟是没什么压力的，所以总是断断续续，作为一个搞运维、日常负责打杂的，想到写代码就不是特别开心，唉。。。但是还得搞啊，无论两年后我还会不会搞运维，但是一定的编程能力是不可或缺的，现在的IT行业，有哪一个岗位能够脱离代码呢？而且，万一两年之后不搞运维想搞点其他的，那么编程能力就是刚需了，不论如何，技多不压身，先从python走起！</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。&lt;br&gt;github地址：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/&lt;/a&gt;&lt;br&gt;因为本人为菜鸡一只，所以写出来的代码应该是十分丑陋并且效率底下的，请各路大神不要鄙视，当然，如果能够不吝赐教那就更好啦(≧▽≦)/&lt;br&gt;个人博客：&lt;a href=&quot;https://wjsaya.github.io&quot;&gt;https://wjsaya.github.io&lt;/a&gt;&lt;br&gt;CSDN博客：:&lt;a href=&quot;http://blog.csdn.net/saya_wj&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/saya_wj&lt;/a&gt;&lt;br&gt;本次内容:爬取mzitu.com的图片并保存到本地&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="爬虫" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/%E7%88%AC%E8%99%AB/"/>
    
    
      <category term="py爬虫" scheme="https://wjsaya.github.io/tags/py%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0008:找出html中正文</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0008.html"/>
    <id>https://wjsaya.github.io/python每日一练/0008.html</id>
    <published>2017-07-25T16:00:00.000Z</published>
    <updated>2017-07-26T09:15:17.862Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br>个人博客地址：<a href="https://wjsaya.github.io">https://wjsaya.github.io</a><br><strong>第 0008 题：</strong>一个HTML文件，找出里面的正文。</p>
</blockquote>
<h2 id=""><a href="#" class="headerlink" title=""></a><a id="more"></a></h2><h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>打开html文件；</li>
<li>呃。。。卡住了，不知道怎么搞了；</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#第 0008 题：一个HTML文件，找出里面的正文。</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">analyze</span><span class="params">(file_name)</span>:</span></div><div class="line">    os.listdir()</div><div class="line">    print(os.getcwd())</div><div class="line">    line = open(file_name,<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>).read()</div><div class="line">    <span class="keyword">print</span> (line)</div><div class="line">        <span class="comment"># re.findal(r'',)</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>: </div><div class="line">    html = <span class="string">"./test.html"</span></div><div class="line">    analyze(html)</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><hr>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;个人博客地址：&lt;a href=&quot;https://wjsaya.github.io&quot;&gt;https://wjsaya.github.io&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0008 题：&lt;/strong&gt;一个HTML文件，找出里面的正文。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0007:代码统计</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0007.html"/>
    <id>https://wjsaya.github.io/python每日一练/0007.html</id>
    <published>2017-07-18T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:11.807Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br>个人博客地址：<a href="https://wjsaya.github.io">https://wjsaya.github.io</a><br><strong>第 0007 题：</strong>有个目录，里面是你自己写过的程序，统计一下你写过多少行代码。包括空行和注释，但是要分别列出来。</p>
</blockquote>
<h2 id=""><a href="#" class="headerlink" title=""></a><a id="more"></a></h2><h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>列出目录下所有py文件；</li>
<li>依次逐行读取py文件；</li>
<li>循环加判断，根据结果来更改数组的值，数组里就是统计结果。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#**第 0007 题：**有个目录，里面是你自己写过的程序，统计一下你写过多少行代码。包括空行和注释，但是要分别列出来。</span></div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">file_list</span><span class="params">(dir)</span>:</span></div><div class="line">    os.chdir(dir)</div><div class="line">    F_list = [ F <span class="keyword">for</span> F <span class="keyword">in</span> os.listdir(<span class="string">"./"</span>) <span class="keyword">if</span> os.path.splitext(F)[<span class="number">1</span>]==<span class="string">".py"</span>]</div><div class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> F_list:</div><div class="line">        result = word_count(name)</div><div class="line">        <span class="keyword">print</span> (name+<span class="string">"中，注释为"</span>+str(result[<span class="number">0</span>])+<span class="string">"行，空行为"</span>+str(result[<span class="number">1</span>])+<span class="string">"行，有效代码行数为"</span>+str(result[<span class="number">2</span>]))</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">word_count</span><span class="params">(name)</span>:</span></div><div class="line">    count = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</div><div class="line">    <span class="comment">#第一个为注释，第二个为空格，第三个为代码</span></div><div class="line">    file = open(name, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>).readlines()</div><div class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file:</div><div class="line">        <span class="keyword">if</span> re.match(<span class="string">r'[ ]*#'</span>, line):</div><div class="line">            count[<span class="number">0</span>] += <span class="number">1</span></div><div class="line">        <span class="keyword">elif</span> re.match(<span class="string">r'$'</span>, line):</div><div class="line">                count[<span class="number">1</span>] += <span class="number">1</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            count[<span class="number">2</span>] += <span class="number">1</span></div><div class="line">    <span class="keyword">return</span> count</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>: </div><div class="line">    <span class="comment">#dir = input("输入代码目录:")</span></div><div class="line">    dir = <span class="string">"code"</span></div><div class="line">    file_list(dir)</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p><img src="http://img.blog.csdn.net/20170719170508466?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<hr>
<p>ps：懒癌发作的日常。。。离上一篇已经过去了10天233，慢慢来，不着急。。。<br>另外，我的个人博客是托管在最大的交友网站，不是，是最大的代码托管平台github上的，所以访问可能会有点慢ԅ(¯㉨¯ԅ)</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;个人博客地址：&lt;a href=&quot;https://wjsaya.github.io&quot;&gt;https://wjsaya.github.io&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0007 题：&lt;/strong&gt;有个目录，里面是你自己写过的程序，统计一下你写过多少行代码。包括空行和注释，但是要分别列出来。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0006:单词统计</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0006.html"/>
    <id>https://wjsaya.github.io/python每日一练/0006.html</id>
    <published>2017-07-08T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:13.553Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0006 题：</strong>你有一个目录，放了你一个月的日记，都是 txt，为了避免分词的问题，假设内容都是英文，请统计出你认为每篇日记最重要的词。</p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>嘛。。。先读取出所有的词；<br>2.利用提取出来的词做一个字典，内容为“单词：出现次数”；</li>
<li>一个循环，读出字典内的最大值并提取相应的单词。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#**第 0006 题：**你有一个目录，放了你一个月的日记，都是 txt，为了避免分词的问题，假设内容都是英文，请统计出你认为每篇日记最重要的词。</span></div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dir</span><span class="params">()</span>:</span></div><div class="line"><span class="comment">#检测日志目录是否存在，不存在就创建</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">"log"</span>):</div><div class="line">        os.mkdir(<span class="string">"./log"</span>)</div><div class="line">        <span class="keyword">print</span> (<span class="string">"log目录不存在，已创建"</span>)</div><div class="line">    os.chdir(<span class="string">"./log"</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dective_words</span><span class="params">()</span>:</span></div><div class="line"><span class="comment">#检测文件内的单词,并且调用word_count来统计各个单词中出现频率最高的一个</span></div><div class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> os.walk(<span class="string">"./"</span>):</div><div class="line">        <span class="keyword">print</span> (<span class="string">"当前目录为："</span>+os.getcwd())</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> file[<span class="number">2</span>]:</div><div class="line">            file = open(i, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>).read()</div><div class="line">            word_list = re.findall(<span class="string">'([a-zA-Z0-9]+)'</span>, file)</div><div class="line">            word_dict = word_count(word_list)</div><div class="line">            </div><div class="line">            max = <span class="number">0</span>                     </div><div class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> word_dict.keys():</div><div class="line">                <span class="keyword">if</span> max &lt; int(word_dict.get(key)):</div><div class="line">                    max = word_dict.get(key)</div><div class="line">                    max_key = key</div><div class="line">            <span class="keyword">print</span> (<span class="string">"在"</span>+i+<span class="string">"中,最重要的词为："</span>+max_key+<span class="string">"，共出现了"</span>+str(max)+<span class="string">"次"</span>)    </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">word_count</span><span class="params">(word_list)</span>:</span></div><div class="line"><span class="comment">#统计单词个数</span></div><div class="line">    word_dict=&#123;&#125;</div><div class="line">    frequency = <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> single_word <span class="keyword">in</span> word_list:</div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            number = word_dict.get(single_word)</div><div class="line">            word_dict[single_word]=number+<span class="number">1</span></div><div class="line">        <span class="keyword">except</span>:</div><div class="line">            word_dict[single_word]=frequency</div><div class="line">    <span class="keyword">return</span> word_dict</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    dir()</div><div class="line">    dective_words()</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p><img src="http://img.blog.csdn.net/20170709222159415?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<hr>
<p>ps：因为平时上班的原因（屁，就是懒癌发作233），也是很久未更新了，作为一只python小菜鸟，个人觉得有一个这种小的练手项目还是很棒棒的，作为一只只有C语言基础（真-基础）的菜鸡，让我独立搞个练手项目出来不现实，让我去啃基础感觉又没必要，毕竟我又不是程序员（屁，就是懒得看书233），于是·我能找到的一种方式就是找小题目来给自己做，嘛，反正是让自己入门，所以如果实现思路肯定是比不过学过算法的各位大佬的啦，慢慢来吧，归根结底，不就是个玩~ᕦ༼ ✖ ਊ ✖ ༽ᕤ</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0006 题：&lt;/strong&gt;你有一个目录，放了你一个月的日记，都是 txt，为了避免分词的问题，假设内容都是英文，请统计出你认为每篇日记最重要的词。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0003:统计文档内的单词个数并存放到redis数据库</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0003.html"/>
    <id>https://wjsaya.github.io/python每日一练/0003.html</id>
    <published>2017-06-20T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:18.172Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0003 题：</strong>将 0001 题生成的 200 个激活码（或者优惠券）保存到 Redis 非关系型数据库中。</p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>循环，在count条件内调用length的循环来生成key。</li>
<li>内循环，length条件下随机生成一个字符并追加到code变量。</li>
<li>得到一个key之后，保存到redis数据库</li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#**第 0003 题：**将 0001 题生成的 200 个激活码（或者优惠券）保存到 Redis 非关系型数据库中。</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</div><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> redis</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_code</span><span class="params">(dict, length, count)</span>:</span></div><div class="line"><span class="comment">#根据给定字典，长度来得出激活码</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,int(count)+<span class="number">1</span>):</div><div class="line">        code = <span class="string">""</span></div><div class="line">    <span class="comment">#通过count限制激活码个数，循环调用choice来计算激活码</span></div><div class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">0</span>,int(length)):</div><div class="line">            code = code+str(choice(dict))</div><div class="line">        save_to_redis(count, code)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_redis</span><span class="params">(max, value)</span>:</span></div><div class="line">    <span class="comment">#保存到redis数据库</span></div><div class="line">    redisdb = redis.Redis(host=<span class="string">'10.2.2.131'</span>,port=<span class="number">6379</span>,db=<span class="number">0</span>)</div><div class="line">    redisdb.lpush(<span class="string">'active_code'</span>,value)</div><div class="line">    redisdb.lrange(<span class="string">'active_code'</span>,<span class="number">0</span>,max)</div><div class="line">    redisdb.save()</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    dict = string.ascii_letters[:]</div><div class="line">    <span class="comment">#设定字典为'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'</span></div><div class="line">    count = input(<span class="string">"请输入激活码个数："</span>)</div><div class="line">    <span class="keyword">if</span> count == <span class="string">""</span>:</div><div class="line">        count = <span class="string">"1"</span></div><div class="line">    length = input(<span class="string">"请输入激活码长度："</span>)</div><div class="line">    <span class="keyword">if</span> length == <span class="string">""</span>:</div><div class="line">        length = <span class="string">"8"</span></div><div class="line">    get_code(dict, length, count)</div></pre></td></tr></table></figure>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20170621152344466?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170621152359341?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0003 题：&lt;/strong&gt;将 0001 题生成的 200 个激活码（或者优惠券）保存到 Redis 非关系型数据库中。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0005:把图片大小控制在iphone5的分辨率以下</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0005.html"/>
    <id>https://wjsaya.github.io/python每日一练/0005.html</id>
    <published>2017-06-20T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:20.400Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0005 题：</strong>你有一个目录，装了很多照片，把它们的尺寸变成都不大于 iPhone5 分辨率的大小。<br><a id="more"></a></p>
</blockquote>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>通过OS库的listdir列出所有图片；</li>
<li>然后通过PIL库的Image.open打开图片并获取图片大小；</li>
<li>最后进入一个死循环：通过PIL库的Image.resize来缩小图片为原图片的90%，直到图片大小小于iphone5的分辨率大小，退出循环。</li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#**第 0005 题：**你有一个目录，装了很多照片，把它们的尺寸变成都不大于 iPhone5 分辨率的大小。</span></div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_small</span><span class="params">(dir1, dir2)</span>:</span></div><div class="line">    list = os.listdir(dir1)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> list:</div><div class="line">        image = Image.open(dir1+<span class="string">'/'</span>+i)</div><div class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">            h,w = image.size</div><div class="line">            <span class="comment">#获取图片原始大小,然后进死循环，不停缩小图片为原来的90%，直到大小缩小为iphone5所支持的分辨率。</span></div><div class="line">            <span class="keyword">if</span> h &lt; <span class="number">1136</span>:</div><div class="line">            <span class="comment">#iphone5分辨率为1136x640</span></div><div class="line">                <span class="keyword">if</span> w &lt; <span class="number">640</span>:</div><div class="line">                    <span class="keyword">break</span></div><div class="line">            image = image.resize((int(h*<span class="number">0.9</span>),int(w*<span class="number">0.9</span>)))</div><div class="line">        image.save(dir2+<span class="string">'/'</span>+i)</div><div class="line">        <span class="keyword">print</span> (dir1+<span class="string">'/'</span>+i+<span class="string">"已处理，保存为："</span>+dir2+<span class="string">'/'</span>+i)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    dir1 = input(<span class="string">"缩小前图片存放目录为："</span>)</div><div class="line">    dir2 = input(<span class="string">"缩小后图片存放目录为："</span>)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        os.mkdir(dir2)</div><div class="line">    <span class="keyword">except</span> Exception:</div><div class="line">        <span class="keyword">print</span> (Exception)</div><div class="line">    image_small(dir1, dir2)</div></pre></td></tr></table></figure>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20170621161852141?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20170621161903768?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0005 题：&lt;/strong&gt;你有一个目录，装了很多照片，把它们的尺寸变成都不大于 iPhone5 分辨率的大小。&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0002:生成激活码并存储到mysql数据库</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0002.html"/>
    <id>https://wjsaya.github.io/python每日一练/0002.html</id>
    <published>2017-06-18T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:22.305Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0002 题：</strong>将 0001 题生成的 200 个激活码（或者优惠券）保存到 MySQL 关系型数据库中。</p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>循环，在count条件内调用length的循环来生成key。</li>
<li>内循环，length条件下随机生成一个字符并追加到code变量。</li>
<li>得到一个key之后，保存到mysql数据库</li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#第 0002 题：将 0001 题生成的 200 个激活码（或者优惠券）保存到 MySQL 关系型数据库中。</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</div><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> pymysql.cursors</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_code</span><span class="params">(dict, length, count)</span>:</span></div><div class="line"><span class="comment">#根据给定字典，长度来得出激活码</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,int(count)+<span class="number">1</span>):</div><div class="line">        code = <span class="string">""</span></div><div class="line">    <span class="comment">#通过count限制激活码个数，循环调用choice来计算激活码</span></div><div class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">0</span>,int(length)):</div><div class="line">            code = code+str(choice(dict))</div><div class="line">        save_to_mysql(i, code)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_mysql</span><span class="params">(id, code)</span>:</span></div><div class="line"><span class="comment">#保存到mysql数据库</span></div><div class="line">    host = (<span class="string">"192.168.122.18"</span>)</div><div class="line">    user = (<span class="string">"root"</span>)</div><div class="line">    pass_ = (<span class="string">"123qwe"</span>)</div><div class="line">    db = (<span class="string">"active"</span>)</div><div class="line">    <span class="comment">#设置数据库连接相关信息</span></div><div class="line">    connect = pymysql.connect(host, user, pass_, db)</div><div class="line">    cursor = connect.cursor()</div><div class="line">    <span class="comment">#链接数据库并设置游标</span></div><div class="line">    sql = <span class="string">"insert into activeCode(id, code) VALUES ('%d', '%s')"</span></div><div class="line">    data = (id, code)</div><div class="line">    cursor.execute(sql % data)</div><div class="line">    <span class="comment">#执行sql语句</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">     dict = string.ascii_letters[:]</div><div class="line">    <span class="comment">#设定字典为'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'</span></div><div class="line">    count = input(<span class="string">"请输入激活码个数："</span>)</div><div class="line">    <span class="keyword">if</span> count == <span class="string">""</span>:</div><div class="line">        count = <span class="string">"1"</span></div><div class="line">    length = input(<span class="string">"请输入激活码长度："</span>)</div><div class="line">    <span class="keyword">if</span> length == <span class="string">""</span>:</div><div class="line">        length = <span class="string">"8"</span></div><div class="line">    get_code(dict, length, count)</div></pre></td></tr></table></figure>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20170619150201633?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="运行截图"></p>
<p><img src="http://img.blog.csdn.net/20170619150230493?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="结果截图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0002 题：&lt;/strong&gt;将 0001 题生成的 200 个激活码（或者优惠券）保存到 MySQL 关系型数据库中。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0004:统计文档内的单词个数</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0004.html"/>
    <id>https://wjsaya.github.io/python每日一练/0004.html</id>
    <published>2017-06-18T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:31.559Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0004 题：</strong>任一个英文的纯文本文件，统计其中的单词出现的个数。<br><a id="more"></a></p>
</blockquote>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>打开文件</li>
<li>利用re模块的findall方法返回为数组的特性，匹配单个单词</li>
<li>统计findall方法返回的数组长度即可。</li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#**第 0004 题：**任一个英文的纯文本文件，统计其中的单词出现的个数。</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">file_open</span><span class="params">(filename)</span>:</span></div><div class="line">    f = open(filename, <span class="string">'r'</span>).read()</div><div class="line">    <span class="comment">#打开文件</span></div><div class="line">    ff = re.findall(<span class="string">'([a-zA-Z0-9]+)'</span>, f)</div><div class="line">    <span class="comment">#正则匹配，组内为大小写字母加数字，后面限定位数为一位以上</span></div><div class="line">    <span class="keyword">print</span> (ff)</div><div class="line">    <span class="keyword">print</span> (len(ff))</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    file = input(<span class="string">"将要统计的文件为:"</span>)</div><div class="line">    file_open(file)</div><div class="line"></div><div class="line"></div><div class="line">根据re模块的findall查找大小写字母加数字，且为<span class="number">1</span>位以上的字符串。因为fingall返回的为数组，因此直接len即可得出个数。</div></pre></td></tr></table></figure>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20170619152836527?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="运行截图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0004 题：&lt;/strong&gt;任一个英文的纯文本文件，统计其中的单词出现的个数。&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0001:生成激活码</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0001.html"/>
    <id>https://wjsaya.github.io/python每日一练/0001.html</id>
    <published>2017-06-15T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:16.029Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0001 题：</strong>做为 Apple Store App 独立开发者，你要搞限时促销，为你的应用生成激活码（或者优惠券），使用 Python 如何生成 200 个激活码（或者优惠券）？</p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>循环，在count条件内调用length的循环来生成key。</li>
<li>内循环，length条件下随机生成一个字符并追加到code变量。</li>
<li>得到一个key之后，保存到文件</li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#第 0001 题：做为 Apple Store App 独立开发者，你要搞限时促销，为你的应用生成激活码（或者优惠券），使用 Python 如何生成 200 个激活码（或者优惠券）</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</div><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">"./activecode.code"</span>):</div><div class="line">        <span class="keyword">print</span> (<span class="string">"已经存在activecode.code文件，已经删除"</span>)</div><div class="line">        os.remove(<span class="string">"./activecode.code"</span>)</div><div class="line"></div><div class="line">    dict = string.ascii_letters[:]</div><div class="line">    <span class="comment">#设定字典为'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'</span></div><div class="line">    count = input(<span class="string">"请输入激活码个数："</span>)</div><div class="line">    <span class="keyword">if</span> count == <span class="string">""</span>:</div><div class="line">        count = <span class="string">"1"</span></div><div class="line">    </div><div class="line">    length = input(<span class="string">"请输入激活码长度："</span>)</div><div class="line">    <span class="keyword">if</span> length == <span class="string">""</span>:</div><div class="line">        length = <span class="string">"8"</span></div><div class="line">   </div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,int(count)):</div><div class="line">        code = get_code(dict, length)</div><div class="line">        <span class="keyword">with</span> open (<span class="string">'activecode.code'</span>, <span class="string">'a+'</span>) <span class="keyword">as</span> f:</div><div class="line">            f.write(code+<span class="string">'\n'</span>)</div><div class="line">    <span class="comment">#通过count限制激活码个数，循环调用get_code来计算激活码 </span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_code</span><span class="params">(dict, length)</span>:</span></div><div class="line">    <span class="comment">#根据给定字典，长度来得出激活码</span></div><div class="line">    code = <span class="string">""</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,int(length)):</div><div class="line">        code = code+str(choice(dict))</div><div class="line">    <span class="keyword">return</span> code</div><div class="line"> </div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20170616174126974?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="效果图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0001 题：&lt;/strong&gt;做为 Apple Store App 独立开发者，你要搞限时促销，为你的应用生成激活码（或者优惠券），使用 Python 如何生成 200 个激活码（或者优惠券）？&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python每日一练]--0000:图片添加数字</title>
    <link href="https://wjsaya.github.io/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/0000.html"/>
    <id>https://wjsaya.github.io/python每日一练/0000.html</id>
    <published>2017-06-15T16:00:00.000Z</published>
    <updated>2017-07-26T06:58:10.110Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>题目链接：<a href="https://github.com/Show-Me-the-Code/show-me-the-code" target="_blank" rel="external">https://github.com/Show-Me-the-Code/show-me-the-code</a><br>我的github链接：<a href="https://github.com/wjsaya/python_spider_learn/tree/master/python_daily" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/tree/master/python_daily</a><br><strong>第 0000 题：</strong>将你的 QQ 头像（或者微博头像）右上角加上红色的数字，类似于微信未读信息数量那种提示效果。 类似于图中效果<br><img src="https://camo.githubusercontent.com/d518d3929e4054ce2f9183b23e52908da7e5632d/687474703a2f2f692e696d6775722e636f6d2f736732646b75592e706e673f31" alt="这里写图片描述"></p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>PIL的Image.open打开图片。</li>
<li>获取图片大小。</li>
<li>调用ImageDraw，在图拍呢的指定位置写下数字。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="comment">#Auther: wjsaya</span></div><div class="line"><span class="comment">#**第 0000 题：**将你的 QQ 头像（或者微博头像）右上角加上红色的数字，类似于微信未读信息数量那种提示效果。 类似于图中效果</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image,ImageFont,ImageDraw</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    image = Image.open(<span class="string">'./cat.jpg'</span>)</div><div class="line">    <span class="comment">#打开原图</span></div><div class="line"></div><div class="line">    wight, hight = image.size</div><div class="line">    text = <span class="string">"233"</span></div><div class="line">    color = (<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>)</div><div class="line">    fontsize = wight//<span class="number">8</span></div><div class="line">    font = ImageFont.truetype(<span class="string">"/usr/share/fonts/wps-office/arial.ttf"</span>,fontsize)</div><div class="line">    <span class="comment">#设定参数</span></div><div class="line"></div><div class="line">    draw = ImageDraw.Draw(image)</div><div class="line">    draw.text((fontsize*<span class="number">6</span>,<span class="number">0</span>), text, color, font)</div><div class="line">    image.save(<span class="string">'./c.jpg'</span>, <span class="string">'jpeg'</span>)</div><div class="line">    <span class="comment">#保存图片</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p>原图：<br><img src="http://img.blog.csdn.net/20170616170044605?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="原图"></p>
<p>添加后：<br><img src="http://img.blog.csdn.net/20170616170123575?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="添加后"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;题目链接：&lt;a href=&quot;https://github.com/Show-Me-the-Code/show-me-the-code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Show-Me-the-Code/show-me-the-code&lt;/a&gt;&lt;br&gt;我的github链接：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/tree/master/python_daily&lt;/a&gt;&lt;br&gt;&lt;strong&gt;第 0000 题：&lt;/strong&gt;将你的 QQ 头像（或者微博头像）右上角加上红色的数字，类似于微信未读信息数量那种提示效果。 类似于图中效果&lt;br&gt;&lt;img src=&quot;https://camo.githubusercontent.com/d518d3929e4054ce2f9183b23e52908da7e5632d/687474703a2f2f692e696d6775722e636f6d2f736732646b75592e706e673f31&quot; alt=&quot;这里写图片描述&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
    
      <category term="python每日一练" scheme="https://wjsaya.github.io/tags/python%E6%AF%8F%E6%97%A5%E4%B8%80%E7%BB%83/"/>
    
  </entry>
  
  <entry>
    <title>[python爬虫]--爬取豆瓣音乐topX</title>
    <link href="https://wjsaya.github.io/%E7%88%AC%E8%99%AB/douban_music.html"/>
    <id>https://wjsaya.github.io/爬虫/douban_music.html</id>
    <published>2017-06-14T16:00:00.000Z</published>
    <updated>2017-07-26T06:57:31.248Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。<br>github地址：<a href="https://github.com/wjsaya/python_spider_learn/" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/</a><br>本次内容：从煎蛋网下载图片<br><a id="more"></a></p>
</blockquote>
<hr>
<h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>拼接出所需的页面URL。</li>
<li>用BS去访问和解析页面URL，获取页面内的所需图片并保存到本地并重命名。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"></div><div class="line">url = <span class="string">'http://jandan.net/ooxx'</span></div><div class="line">firefox = &#123;<span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:53.0) Gecko/20100101 Firefox/53.0 FirePHP/0.7.4"</span>&#125;</div><div class="line">Pg_count = input(<span class="string">"请输入想要获取的页数(直接回车默认页码为1):"</span>)</div><div class="line"><span class="keyword">if</span> Pg_count == <span class="string">""</span>:</div><div class="line">    Pg_count = <span class="string">"1"</span></div><div class="line">Pg_count=int(Pg_count)<span class="number">-1</span></div><div class="line"><span class="comment">#给get_html函数使用，预先+1上去，这样-1就是当前第一页。</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_content</span><span class="params">(url)</span>:</span></div><div class="line"><span class="comment">#获取url，返回BS解析之后的content</span></div><div class="line">    html = requests.get(url, headers=firefox)</div><div class="line">    content = BeautifulSoup(html.content, <span class="string">"lxml"</span>)</div><div class="line">    <span class="keyword">return</span> content</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_current_page</span><span class="params">(content)</span>:</span></div><div class="line"><span class="comment">#获取url，返回url中的current-comment-page（即页码）</span></div><div class="line">    page_swap1 = content.find(<span class="string">'span'</span>,class_=<span class="string">"current-comment-page"</span>)</div><div class="line">    page_swap2 = str(page_swap1)</div><div class="line">    current_page = page_swap2[<span class="number">36</span>:<span class="number">39</span>]</div><div class="line">    <span class="comment">#current_page = str(content.find('span',class_="current-comment-page"))[36:39]</span></div><div class="line">    <span class="comment">#此处本来是写成了一句语句直接提取，后来想了想，万一以后想再看下，这会把自己绕晕，于是乎拆分了、、、</span></div><div class="line">    <span class="keyword">return</span> current_page</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_img_url</span><span class="params">(content, max_page)</span>:</span></div><div class="line"><span class="comment">#获取解码后的html文件以及最大页码。获取html中的图片img_url，然后把img_url和最大页码传递给get_img函数。</span></div><div class="line">    <span class="comment">#html = BeautifulSoup(content, "lxml")</span></div><div class="line">    img_li = content.find_all(<span class="string">"a"</span>, class_=<span class="string">"view_img_link"</span>)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> img_li:</div><div class="line">        img_url = <span class="string">"http:"</span>+i[<span class="string">"href"</span>]</div><div class="line">        <span class="comment">#img_url = "http://"+i["href"].strip("/")</span></div><div class="line">        get_img(img_url, max_page)</div><div class="line">        <span class="comment">#strip,用来删除某字符</span></div><div class="line">        <span class="comment">#并且加上http协议头</span></div><div class="line">        </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_img</span><span class="params">(img_url, floder)</span>:</span></div><div class="line"><span class="comment">#获取img_url和文件夹名（即当前网页页码），通过img_url下载图片并保存在floder内。</span></div><div class="line">    img_name = img_url[<span class="number">28</span>:]</div><div class="line">    img_file = requests.get(img_url, headers=firefox)</div><div class="line">    q = img_file.content</div><div class="line">    <span class="keyword">with</span> open (<span class="string">"./get/"</span>+floder+<span class="string">"/"</span>+img_name, <span class="string">'wb'</span>) <span class="keyword">as</span> img_file:</div><div class="line">        img_file.write(q)</div><div class="line">        <span class="keyword">print</span> (floder+<span class="string">"/"</span>+img_name+<span class="string">" is downloaded"</span>)</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_html</span><span class="params">(max_page, Pg_count)</span>:</span></div><div class="line"><span class="comment">#获取最大页码数及想要下载图片的页数，循环得出每页的url地址。</span></div><div class="line">    <span class="comment">#http://jandan.net/ooxx/page-107#comments</span></div><div class="line">    <span class="keyword">while</span> Pg_count &gt;= <span class="number">0</span>:</div><div class="line">        pg = int(max_page)-Pg_count</div><div class="line">        url = <span class="string">"http://jandan.net/ooxx/page-"</span>+str(pg)+<span class="string">"#comments"</span></div><div class="line">        <span class="keyword">print</span> (<span class="string">"当前获取到的包含图片的页面url地址为："</span>+url)</div><div class="line">        Pg_count -= <span class="number">1</span></div><div class="line">        content = get_content(url)</div><div class="line">        <span class="keyword">print</span> (<span class="string">"开始创建图片存放目录并获取图片链接地址......"</span>)</div><div class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">"./get/"</span>) == <span class="keyword">False</span>:</div><div class="line">            os.mkdir (<span class="string">"./get/"</span>)</div><div class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">"./get/"</span>+str(pg)) == <span class="keyword">False</span>:</div><div class="line">            os.mkdir (<span class="string">"./get/"</span>+str(pg))</div><div class="line">        <span class="keyword">print</span> (<span class="string">"开始下载图片，本地存放目录为：./get/"</span>+str(pg))</div><div class="line">        time.sleep(<span class="number">3</span>)</div><div class="line">        get_img_url(content, str(pg))</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line"><span class="comment">#主函数，一切的开端</span></div><div class="line">    content = get_content(url)</div><div class="line">    current_page = get_current_page(content)</div><div class="line">    get_html(current_page, int(Pg_count))</div><div class="line">    </div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<p>下载过程截图：<br><img src="http://img.blog.csdn.net/20170614163946243?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="下载过程截图"></p>
<p>恩。。。效果图：<br><img src="http://img.blog.csdn.net/20170614164348318?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="恩。。。效果图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。&lt;br&gt;github地址：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/&lt;/a&gt;&lt;br&gt;本次内容：从煎蛋网下载图片&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="爬虫" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/%E7%88%AC%E8%99%AB/"/>
    
    
      <category term="py爬虫" scheme="https://wjsaya.github.io/tags/py%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>[python爬虫]--从煎蛋网下载图片</title>
    <link href="https://wjsaya.github.io/%E7%88%AC%E8%99%AB/jiandan.html"/>
    <id>https://wjsaya.github.io/爬虫/jiandan.html</id>
    <published>2017-06-13T16:00:00.000Z</published>
    <updated>2017-07-26T06:57:33.847Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。<br>github地址：<a href="https://github.com/wjsaya/python_spider_learn/" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/</a><br>本次内容：从煎蛋网下载图片<br><a id="more"></a></p>
</blockquote>
<hr>
<h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>拼接出所需的页面URL。</li>
<li>用BS去访问和解析页面URL，获取页面内的所需图片并保存到本地并重命名。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"></div><div class="line">url = <span class="string">'http://jandan.net/ooxx'</span></div><div class="line">firefox = &#123;<span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:53.0) Gecko/20100101 Firefox/53.0 FirePHP/0.7.4"</span>&#125;</div><div class="line">Pg_count = input(<span class="string">"请输入想要获取的页数(直接回车默认页码为1):"</span>)</div><div class="line"><span class="keyword">if</span> Pg_count == <span class="string">""</span>:</div><div class="line">    Pg_count = <span class="string">"1"</span></div><div class="line">Pg_count=int(Pg_count)<span class="number">-1</span></div><div class="line"><span class="comment">#给get_html函数使用，预先+1上去，这样-1就是当前第一页。</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_content</span><span class="params">(url)</span>:</span></div><div class="line"><span class="comment">#获取url，返回BS解析之后的content</span></div><div class="line">    html = requests.get(url, headers=firefox)</div><div class="line">    content = BeautifulSoup(html.content, <span class="string">"lxml"</span>)</div><div class="line">    <span class="keyword">return</span> content</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_current_page</span><span class="params">(content)</span>:</span></div><div class="line"><span class="comment">#获取url，返回url中的current-comment-page（即页码）</span></div><div class="line">    page_swap1 = content.find(<span class="string">'span'</span>,class_=<span class="string">"current-comment-page"</span>)</div><div class="line">    page_swap2 = str(page_swap1)</div><div class="line">    current_page = page_swap2[<span class="number">36</span>:<span class="number">39</span>]</div><div class="line">    <span class="comment">#current_page = str(content.find('span',class_="current-comment-page"))[36:39]</span></div><div class="line">    <span class="comment">#此处本来是写成了一句语句直接提取，后来想了想，万一以后想再看下，这会把自己绕晕，于是乎拆分了、、、</span></div><div class="line">    <span class="keyword">return</span> current_page</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_img_url</span><span class="params">(content, max_page)</span>:</span></div><div class="line"><span class="comment">#获取解码后的html文件以及最大页码。获取html中的图片img_url，然后把img_url和最大页码传递给get_img函数。</span></div><div class="line">    <span class="comment">#html = BeautifulSoup(content, "lxml")</span></div><div class="line">    img_li = content.find_all(<span class="string">"a"</span>, class_=<span class="string">"view_img_link"</span>)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> img_li:</div><div class="line">        img_url = <span class="string">"http:"</span>+i[<span class="string">"href"</span>]</div><div class="line">        <span class="comment">#img_url = "http://"+i["href"].strip("/")</span></div><div class="line">        get_img(img_url, max_page)</div><div class="line">        <span class="comment">#strip,用来删除某字符</span></div><div class="line">        <span class="comment">#并且加上http协议头</span></div><div class="line">        </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_img</span><span class="params">(img_url, floder)</span>:</span></div><div class="line"><span class="comment">#获取img_url和文件夹名（即当前网页页码），通过img_url下载图片并保存在floder内。</span></div><div class="line">    img_name = img_url[<span class="number">28</span>:]</div><div class="line">    img_file = requests.get(img_url, headers=firefox)</div><div class="line">    q = img_file.content</div><div class="line">    <span class="keyword">with</span> open (<span class="string">"./get/"</span>+floder+<span class="string">"/"</span>+img_name, <span class="string">'wb'</span>) <span class="keyword">as</span> img_file:</div><div class="line">        img_file.write(q)</div><div class="line">        <span class="keyword">print</span> (floder+<span class="string">"/"</span>+img_name+<span class="string">" is downloaded"</span>)</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_html</span><span class="params">(max_page, Pg_count)</span>:</span></div><div class="line"><span class="comment">#获取最大页码数及想要下载图片的页数，循环得出每页的url地址。</span></div><div class="line">    <span class="comment">#http://jandan.net/ooxx/page-107#comments</span></div><div class="line">    <span class="keyword">while</span> Pg_count &gt;= <span class="number">0</span>:</div><div class="line">        pg = int(max_page)-Pg_count</div><div class="line">        url = <span class="string">"http://jandan.net/ooxx/page-"</span>+str(pg)+<span class="string">"#comments"</span></div><div class="line">        <span class="keyword">print</span> (<span class="string">"当前获取到的包含图片的页面url地址为："</span>+url)</div><div class="line">        Pg_count -= <span class="number">1</span></div><div class="line">        content = get_content(url)</div><div class="line">        <span class="keyword">print</span> (<span class="string">"开始创建图片存放目录并获取图片链接地址......"</span>)</div><div class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">"./get/"</span>) == <span class="keyword">False</span>:</div><div class="line">            os.mkdir (<span class="string">"./get/"</span>)</div><div class="line">        <span class="keyword">if</span> os.path.exists(<span class="string">"./get/"</span>+str(pg)) == <span class="keyword">False</span>:</div><div class="line">            os.mkdir (<span class="string">"./get/"</span>+str(pg))</div><div class="line">        <span class="keyword">print</span> (<span class="string">"开始下载图片，本地存放目录为：./get/"</span>+str(pg))</div><div class="line">        time.sleep(<span class="number">3</span>)</div><div class="line">        get_img_url(content, str(pg))</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line"><span class="comment">#主函数，一切的开端</span></div><div class="line">    content = get_content(url)</div><div class="line">    current_page = get_current_page(content)</div><div class="line">    get_html(current_page, int(Pg_count))</div><div class="line">    </div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。&lt;br&gt;github地址：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/&lt;/a&gt;&lt;br&gt;本次内容：从煎蛋网下载图片&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="爬虫" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/%E7%88%AC%E8%99%AB/"/>
    
    
      <category term="py爬虫" scheme="https://wjsaya.github.io/tags/py%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>[python爬虫]--调用有道词典进行翻译</title>
    <link href="https://wjsaya.github.io/%E7%88%AC%E8%99%AB/youdao1.html"/>
    <id>https://wjsaya.github.io/爬虫/youdao1.html</id>
    <published>2017-06-13T16:00:00.000Z</published>
    <updated>2017-07-26T06:51:21.218Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。<br>github地址：<a href="https://github.com/wjsaya/python_spider_learn/" target="_blank" rel="external">https://github.com/wjsaya/python_spider_learn/</a><br>本次内容:通过有道词典的接口写一个命令行的翻译工具。<br><a id="more"></a></p>
</blockquote>
<hr>
<h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><ol>
<li>获取用户输入。</li>
<li>通过值构造请求header。</li>
<li>向有道翻译的对应接口发送headers，然后获取返回并取出结果并输出。</li>
</ol>
<hr>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#调用有道词典的web接口进行翻译</span></div><div class="line"><span class="comment">#coding: utf-8</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> json</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">translate</span><span class="params">(word=None)</span>:</span></div><div class="line">    url = <span class="string">'http://fanyi.youdao.com/translate?smartresult=dict&amp;smartresult=rule&amp;smartresult=ugc&amp;sessionFrom=null'</span></div><div class="line">    key=&#123;</div><div class="line">    <span class="string">'type'</span>:<span class="string">"AUTO"</span>,</div><div class="line">    <span class="string">'i'</span>:word,</div><div class="line">    <span class="string">"doctype"</span>:<span class="string">"json"</span>,</div><div class="line">    <span class="string">"version"</span>:<span class="string">"2.1"</span>,</div><div class="line">    <span class="string">"keyfrom"</span>:<span class="string">"fanyi.web"</span>,</div><div class="line">    <span class="string">"ue"</span>:<span class="string">"UTF-8"</span>,</div><div class="line">    <span class="string">"action"</span>:<span class="string">"FY_BY_CLICKBUTTON"</span>,</div><div class="line">    <span class="string">"typoResult"</span>:<span class="string">"true"</span></div><div class="line">    &#125;  </div><div class="line">    <span class="comment">#key这个字典为发送给有道词典服务器的内容，里面的i就是我们需要翻译的内容。此处直接调用word变量。</span></div><div class="line">    response = requests.post(url,data=key)</div><div class="line">    <span class="keyword">return</span> result</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_result</span><span class="params">(li=None)</span>:</span></div><div class="line">    result = json.loads(li.text)</div><div class="line">    <span class="keyword">print</span> (<span class="string">"输入的词为：%s"</span> % l</div><div class="line">i[<span class="string">'translateResult'</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="string">'src'</span>])</div><div class="line">    <span class="keyword">print</span> (<span class="string">"翻译结果为：%s"</span> % li[<span class="string">'translateResult'</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="string">'tgt'</span>])</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>:</span></div><div class="line">	    <span class="keyword">print</span> (<span class="string">"本程序调用有道词典的API进行翻译，可达到以下效果："</span>)</div><div class="line">	    <span class="keyword">print</span> (<span class="string">"外文--&gt;中文"</span>)</div><div class="line">	    <span class="keyword">print</span> (<span class="string">"中文--&gt;英文"</span>)</div><div class="line">	    word = input(<span class="string">'请输入你想要翻译的词或句：'</span>)</div><div class="line">	    list_trans = translate(word)</div><div class="line">	    get=get_result(list_trans)</div><div class="line">	</div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">	main()</div></pre></td></tr></table></figure>
<h2 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h2><p><img src="http://img.blog.csdn.net/20170614162941824?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2F5YV93ag==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="运行结果截图"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近在学习python爬虫，写出来的一些爬虫记录在csdn博客里，同时备份一个放在了github上。&lt;br&gt;github地址：&lt;a href=&quot;https://github.com/wjsaya/python_spider_learn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wjsaya/python_spider_learn/&lt;/a&gt;&lt;br&gt;本次内容:通过有道词典的接口写一个命令行的翻译工具。&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="python" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/"/>
    
      <category term="爬虫" scheme="https://wjsaya.github.io/categories/%E7%BC%96%E7%A8%8B/python/%E7%88%AC%E8%99%AB/"/>
    
    
      <category term="py爬虫" scheme="https://wjsaya.github.io/tags/py%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
</feed>
